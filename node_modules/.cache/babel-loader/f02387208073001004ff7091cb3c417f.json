{"ast":null,"code":"import _objectSpread from\"C:/Users/teguhdarma/kasir-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"C:/Users/teguhdarma/kasir-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/teguhdarma/kasir-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/Users/teguhdarma/kasir-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/teguhdarma/kasir-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import{Row,Col,Container}from\"react-bootstrap\";import Hasil from\"../component/Hasil\";import ListCategories from\"../component/ListCategories\";import NavbarComponent from\"../component/NavbarComponent\";import{API_URL}from\"../utils/constant\";import axios from\"axios\";import swal from\"sweetalert\";import Search from\"../component/Search\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Home=/*#__PURE__*/function(_Component){_inherits(Home,_Component);var _super=_createSuper(Home);function Home(props){var _this;_classCallCheck(this,Home);_this=_super.call(this,props);_this.changeCategory=function(value){_this.setState({categoriygdipilih:value,menus:[],keranjangs:[]});axios.get(API_URL+\"products?category.nama=\"+value).then(function(res){var menus=res.data;_this.setState({menus:menus});}).catch(function(error){console.log(error);});axios.get(API_URL+\"keranjangs\").then(function(res){var keranjangs=res.data;_this.setState({keranjangs:keranjangs});}).catch(function(error){console.log(error);});};_this.masukkeranjang=function(value){axios.get(API_URL+\"keranjangs?product.id=\"+value.id).then(function(res){if(res.data.length===0){var keranjang={jumlah:1,totalharga:value.harga,product:value};axios.post(API_URL+\"keranjangs\",keranjang).then(function(res){swal({title:\"sukses\",text:\"sukses masuk keranjang\"+keranjang.product.nama,icon:\"success\",button:false});}).catch(function(error){console.log(error);});}else{var _keranjang={jumlah:res.data[0].jumlah+1,totalharga:res.data[0].totalharga+value.harga,product:value};axios.put(API_URL+\"keranjangs/\"+res.data[0].id,_keranjang).then(function(res){swal({title:\"sukses\",text:\"sukses masuk keranjang\"+_keranjang.product.nama,icon:\"success\",button:false,timer:1500});}).catch(function(error){console.log(error);});axios.get(API_URL+\"keranjangs\").then(function(res){var keranjangs=res.data;_this.setState({keranjangs:keranjangs});}).catch(function(error){console.log(error);});}}).catch(function(error){console.log(error);});console.log(_this.state.keranjangs);};_this.state={menus:[],categoriygdipilih:\"Makanan\",keranjangs:[]};return _this;}_createClass(Home,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;axios.get(API_URL+\"products?category.nama=\"+this.state.categoriygdipilih).then(function(res){var menus=res.data;_this2.setState({menus:menus});}).catch(function(error){console.log(error);});}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevState){var _this3=this;if(this.state.keranjangs!==prevState.keranjangs){axios.get(API_URL+\"keranjangs\").then(function(res){var keranjangs=res.data;_this3.setState({keranjangs:keranjangs});}).catch(function(error){console.log(error);});}}},{key:\"render\",value:function render(){var _this$state=this.state,menus=_this$state.menus,categoriygdipilih=_this$state.categoriygdipilih,keranjangs=_this$state.keranjangs;return/*#__PURE__*/_jsxs(\"div\",{className:\"Home\",children:[/*#__PURE__*/_jsx(NavbarComponent,{}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-3 mb-4\",children:/*#__PURE__*/_jsx(Container,{fluid:true,children:/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(ListCategories,{changeCategory:this.changeCategory,categoriygdipilih:categoriygdipilih})})})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3 mb-4\",children:[/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsxs(Col,{children:[/*#__PURE__*/_jsxs(\"h4\",{className:\"mt-5\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"daftar product\"}),/*#__PURE__*/_jsx(Search,{details:menus,masukkeranjang:this.masukkeranjang})]}),/*#__PURE__*/_jsx(\"hr\",{})]})})}),/*#__PURE__*/_jsx(\"div\",{})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-3 mb-4\",children:/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(Hasil,_objectSpread({keranjangs:keranjangs},this.props))})})})})]});}}]);return Home;}(Component);export{Home as default};","map":{"version":3,"sources":["C:/Users/teguhdarma/kasir-app/src/pages/Home.js"],"names":["React","Component","Row","Col","Container","Hasil","ListCategories","NavbarComponent","API_URL","axios","swal","Search","Home","props","changeCategory","value","setState","categoriygdipilih","menus","keranjangs","get","then","res","data","catch","error","console","log","masukkeranjang","id","length","keranjang","jumlah","totalharga","harga","product","post","title","text","nama","icon","button","put","timer","state","prevState"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport { Row, Col, Container } from \"react-bootstrap\";\r\nimport Hasil from \"../component/Hasil\";\r\nimport ListCategories from \"../component/ListCategories\";\r\nimport NavbarComponent from \"../component/NavbarComponent\";\r\nimport { API_URL } from \"../utils/constant\";\r\nimport axios from \"axios\";\r\nimport swal from \"sweetalert\";\r\nimport Search from \"../component/Search\";\r\n\r\nexport default class Home extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      menus: [],\r\n      categoriygdipilih: \"Makanan\",\r\n      keranjangs: [],\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    axios\r\n      .get(API_URL + \"products?category.nama=\" + this.state.categoriygdipilih)\r\n      .then((res) => {\r\n        const menus = res.data;\r\n        this.setState({ menus });\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n      });\r\n  }\r\n\r\n  componentDidUpdate(prevState){\r\n      if(this.state.keranjangs !== prevState.keranjangs){\r\n        axios\r\n        .get(API_URL + \"keranjangs\" )\r\n        .then((res) => {\r\n          const keranjangs = res.data;\r\n          this.setState({ keranjangs });\r\n        })\r\n        .catch((error) => {\r\n          console.log(error);\r\n        });\r\n      }\r\n  }\r\n\r\n  changeCategory = (value) => {\r\n    this.setState({\r\n      categoriygdipilih: value,\r\n      menus: [],\r\n      keranjangs: [],\r\n    });\r\n    axios\r\n      .get(API_URL + \"products?category.nama=\" + value)\r\n      .then((res) => {\r\n        const menus = res.data;\r\n        this.setState({ menus });\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n      });\r\n    axios\r\n      .get(API_URL + \"keranjangs\" )\r\n      .then((res) => {\r\n        const keranjangs = res.data;\r\n        this.setState({ keranjangs });\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n      });\r\n  };\r\n\r\n\r\n  \r\n  masukkeranjang = (value) => {\r\n    axios\r\n      .get(API_URL + \"keranjangs?product.id=\" + value.id)\r\n      .then((res) => {\r\n        if (res.data.length === 0) {\r\n          const keranjang = {\r\n            jumlah: 1,\r\n            totalharga: value.harga,\r\n            product: value,\r\n          };\r\n\r\n          axios\r\n            .post(API_URL + \"keranjangs\", keranjang)\r\n            .then((res) => {\r\n              swal({\r\n                title: \"sukses\",\r\n                text: \"sukses masuk keranjang\" + keranjang.product.nama,\r\n                icon: \"success\",\r\n                button: false,\r\n              });\r\n            })\r\n            .catch((error) => {\r\n              console.log(error);\r\n            });\r\n        } else {\r\n          const keranjang = {\r\n            jumlah: res.data[0].jumlah + 1,\r\n            totalharga: res.data[0].totalharga + value.harga,\r\n            product: value,\r\n          };\r\n          axios\r\n            .put(API_URL + \"keranjangs/\" + res.data[0].id, keranjang)\r\n            .then((res) => {\r\n              swal({\r\n                title: \"sukses\",\r\n                text: \"sukses masuk keranjang\" + keranjang.product.nama,\r\n                icon: \"success\",\r\n                button: false,\r\n                timer: 1500,\r\n              });\r\n            })\r\n            .catch((error) => {\r\n              console.log(error);\r\n            });\r\n\r\n          axios\r\n            .get(API_URL + \"keranjangs\")\r\n            .then((res) => {\r\n              const keranjangs = res.data;\r\n              this.setState({ keranjangs });\r\n            })\r\n            .catch((error) => {\r\n              console.log(error);\r\n            });\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n      });\r\n    console.log(this.state.keranjangs);\r\n  };\r\n\r\n  render() {\r\n    const { menus, categoriygdipilih, keranjangs } = this.state;\r\n    return (\r\n      <div className=\"Home\">\r\n        <NavbarComponent />\r\n        <div className=\"mt-3 mb-4\">\r\n          <Container fluid>\r\n            <Row>\r\n              <Col>\r\n                <ListCategories\r\n                  changeCategory={this.changeCategory}\r\n                  categoriygdipilih={categoriygdipilih}\r\n                />\r\n              </Col>\r\n            </Row>\r\n          </Container>\r\n        </div>\r\n        <div className=\"mt-3 mb-4\">\r\n          <Container>\r\n            <Row>\r\n              <Col  >\r\n                <h4 className=\"mt-5\">\r\n                  <strong>daftar product</strong>\r\n                  <Search \r\n                    details={menus}\r\n                    masukkeranjang={this.masukkeranjang}\r\n                  />\r\n                </h4>\r\n                <hr />\r\n              </Col>\r\n            </Row>\r\n          </Container>\r\n          <div></div>\r\n        </div>\r\n\r\n        <div className=\"mt-3 mb-4\">\r\n          <Container>\r\n            <Row>\r\n              <Col>\r\n                <Hasil keranjangs={keranjangs} {...this.props}/>\r\n              </Col>\r\n            </Row>\r\n          </Container>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}